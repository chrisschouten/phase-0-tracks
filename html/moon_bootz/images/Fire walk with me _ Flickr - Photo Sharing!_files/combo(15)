YUI.add("signup-modal-view",function(e,t){"use strict";var n,r;n={css:{destinationContainer:"body",closeX:".close-x",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},r={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").SignUpModal=e.FlickrView.create(this.name,e.Views.FluidModal,[],{initializer:function(e){return this.set("showFooter",!1),this.set("showHeader",!1),this.set("showButtonFlavorText",!1),this.set("showButtons",!1),this.set("showActionButton",!1),this.set("showCancelButton",!1),this.set("signUpHeaderClass",e.signUpHeaderClass),this.set("signUpHeaderImage",e.signUpHeaderImage),this.set("signUpTitle",e.signUpTitle),this.set("signUpMessage",e.signUpMessage),this.set("beaconPrefix",e.beaconPrefix),this.set("classList","signup-modal"),this},buildContainer:function(){if(!this.alreadyShowingModal){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalShow");var t={signUpHeaderClass:this.get("signUpHeaderClass"),signUpHeaderImage:this.get("signUpHeaderImage"),signUpTitle:this.get("signUpTitle"),signUpMessage:this.get("signUpMessage")};this.set("htmlMessage",this.templates("signup-modal")(t)),this.constructor.superclass.buildContainer.call(this)}return this},activate:function(){return this.get("container").one(".signup-button").on("click",this.handleAction.bind(this)),this.get("container").one(".signin-link").on("click",this.handleSignIn.bind(this)),this.constructor.superclass.activate.call(this),this},handleSignIn:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignInClick"),this.fire("signInClick",t),this.constructor.superclass.handleAction.call(this)},handleAction:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignUpClick"),this.fire("signUpClick",t),this.constructor.superclass.handleAction.call(this)},handleCancel:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"CancelClick"),this.constructor.superclass.handleCancel.call(this)}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-modal","signup-modal-css"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-fluid-share",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" disable-sharing"}function h(e,t){var r="",i,s;return r+=' title="',s={hash:{intlName:"share-modal.SHARING_DISABLED"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+'" ',r}function p(e,t){var r="",i;return r+=' title="',(i=n.shareTooltip)?i=i.call(e,{hash:{},data:t}):(i=e.shareTooltip,i=typeof i===f?i.apply(e):i),r+=a(i)+'"',r}function d(e,t){var r="",i,s;r+="\n		<span ",i=n["if"].call(e,e.sharingDisabled,{hash:{},inverse:l.program(5,p,t),fn:l.program(3,h,t),data:t});if(i||i===0)r+=i;return r+=' class="fluid-share-button-label">',s={hash:{intlName:"share-modal.SHARE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;s+='<div class="fluid-share-button ',(o=n.extraShareButtonClassList)?o=o.call(t,{hash:{},data:i}):(o=t.extraShareButtonClassList,o=typeof o===f?o.apply(t):o),s+=a(o),o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+='"\n',o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.program(5,p,i),fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=">\n\n	<span ",o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.program(5,p,i),fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=' class="fluid-share-icon ',(o=n.extraShareButtonIconClassList)?o=o.call(t,{hash:{},data:i}):(o=t.extraShareButtonIconClassList,o=typeof o===f?o.apply(t):o),s+=a(o)+'"></span>\n	',o=n["if"].call(t,t.showShareButtonLabel,{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(o||o===0)s+=o;return s+="\n\n </div>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-tumblr-post",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+="\n	<strong>",(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+' <a href="',(i=n.ownerURL)?i=i.call(e,{hash:{},data:t}):(i=e.ownerURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',s={hash:{intlName:"common.BY_USER",user:e.ownerName},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></strong>\n",r}function h(e,t){var r="",i;r+="\n	",i=n["if"].call(e,e.ownerURL,{hash:{},inverse:l.program(6,d,t),fn:l.program(4,p,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function p(e,t){var r="",i;return r+='\n		<strong><a href="',(i=n.ownerURL)?i=i.call(e,{hash:{},data:t}):(i=e.ownerURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></strong>\n	",r}function d(e,t){var r="",i;return r+='\n		<strong><a href="',(i=n.linkToShare)?i=i.call(e,{hash:{},data:t}):(i=e.linkToShare,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></strong>\n	",r}function v(e,t){var r="",i,s;return r+="\n	<br /><i>",s={hash:{intlName:"share-modal.VIA_FLICKR"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</i>\n	<br />",s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.description,s):f.call(e,"renderTrustedMarkup",e.description,s)))+"\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;o=n["if"].call(t,t.ownerName,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.description,{hash:{},inverse:l.noop,fn:l.program(8,v,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-tumblr-post",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-loading-state",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=this;s+="<!-- okay, not ideal, but this is just a loading state so we inline some styles -->\n<style>\n@keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);transform:translateX(12px)}}\n@-webkit-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);transform:translateX(12px)}}\n@keyframes blueBall{50%{-webkit-transform:translateX(-12px);transform:translateX(-12px)}}\n@-webkit-keyframes blueBall{50%{-webkit-transform:translateX(-12px);transform:translateX(-12px)}}\n.fluid .balls{position:relative;width:24px;height:12px;margin:0 auto;display:inline-block}.fluid .balls::before,.fluid .balls::after{position:absolute;top:0;width:12px;height:12px;content:'';border-radius:100%;-webkit-animation:pinkBall 1.6s ease-in-out infinite;animation:pinkBall 1.6s ease-in-out infinite}.fluid .balls::before{background:#ff329c;left:0}.fluid .balls::after{-webkit-animation:blueBall 1.6s ease-in-out infinite;animation:blueBall 1.6s ease-in-out infinite;background:#0063dc;right:0}#yui3-css-stamp.fluid-balls-css{display:none}\n\n.fluid.sharing-loader .balls {\n	margin: 80px auto;\n	display: block;\n}\n</style>\n\n\n<div class=\"sharing-loader fluid\">\n	",o=u.invokePartial(r["flickr-balls"],"flickr-balls",t,n,r,i);if(o||o===0)s+=o;return s+="\n</div>",s}),r={};e.Array.each(["flickr-balls"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-loading-state",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls"]});
YUI.add("hermes-template-fluid-share-panel",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return" sharing-type-disabled"}function d(e,t){return" sharing-type-enabled"}function v(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.facebook),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function m(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.tumblr),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function g(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.twitter),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function y(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.pinterest),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function b(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.flickr),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function w(e,t){return" single-link-field"}function E(e,t){return" single-link"}function S(e,t){var r="",i,s,o;r+="\n							",o={hash:{},inverse:h.noop,fn:h.program(20,x,t),data:t},s=(i=n.isFlipped||e.isFlipped,i?i.call(e,e.flippers,"enable-embedr-in-share",o):c.call(e,"isFlipped",e.flippers,"enable-embedr-in-share",o));if(s||s===0)r+=s;r+="\n							",o={hash:{},inverse:h.noop,fn:h.program(23,N,t),data:t},s=(i=n.isNotFlipped||e.isNotFlipped,i?i.call(e,e.flippers,"enable-embedr-in-share",o):c.call(e,"isNotFlipped",e.flippers,"enable-embedr-in-share",o));if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:h.noop,fn:h.program(28,L,t),data:t});if(s||s===0)r+=s;return r+="\n						",r}function x(e,t){var r="",i,s;r+="\n								",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:h.noop,fn:h.program(21,T,t),data:t});if(s||s===0)r+=s;return r+="\n							",r}function T(e,t){var r="",i,s;return r+='\n									<span class="link-type-button embed-type-button">',s={hash:{intlName:"share-modal.EMBED"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+"</span>\n								",r}function N(e,t){var r="",i,s;r+="\n								",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:h.noop,fn:h.program(24,C,t),data:t});if(s||s===0)r+=s;r+="\n\n								",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.iframe),{hash:{},inverse:h.noop,fn:h.program(26,k,t),data:t});if(s||s===0)r+=s;return r+="\n							",r}function C(e,t){return'\n									<span class="link-type-button embed-type-button">HTML</span>\n								'}function k(e,t){return'\n									<span class="link-type-button iframe-type-button">IFRAME</span>\n								'}function L(e,t){var r="",i,s;return r+='\n								<span class="link-type-button bbcode-type-button">',s={hash:{intlName:"share-modal.BBCODE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function A(e,t){return" single-highlight"}function O(e,t){var r="",i;r+='\n						<div class="grab-link-only grab-link">\n\n							',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(33,M,t),data:t});if(i||i===0)r+=i;r+='\n\n							<input readonly type="text" class="grab-link-text-field" value="',(i=n.grabLink)?i=i.call(e,{hash:{},data:t}):(i=e.grabLink,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n\n							<div class="grab-link-loader ',i=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(36,D,t),data:t});if(i||i===0)r+=i;r+=" ",i=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(38,P,t),data:t});if(i||i===0)r+=i;r+='"><div class="balls"></div></div>\n\n							<div class="grab-link-reminders">\n								<div class="grab-link-privacy-reminder hide-reminder',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(40,H,t),data:t});if(i||i===0)r+=i;r+='">',(i=n.privacyWarningString)?i=i.call(e,{hash:{},data:t}):(i=e.privacyWarningString,i=typeof i===f?i.apply(e):i),r+=l(i)+"</div>\n								",i=n["if"].call(e,e.showDownloadWarning,{hash:{},inverse:h.noop,fn:h.program(42,B,t),data:t});if(i||i===0)r+=i;return r+="\n							</div>\n\n						</div>\n					",r}function M(e,t){var r="",i;r+="\n								",i=n["if"].call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(34,_,t),data:t});if(i||i===0)r+=i;return r+="\n							",r}function _(e,t){var r="",i;return r+='\n								<div class="grab-link-permission-field grab-link-field">\n									<span class="grab-link-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n								',r}function D(e,t){return" no-permission-loader"}function P(e,t){return"no-permission-loader"}function H(e,t){return" with-guestpasses "}function B(e,t){var r="",i,s;return r+='<div class="grab-link-download-reminder">',(i=n.downloadAccessString)?i=i.call(e,{hash:{},data:t}):(i=e.downloadAccessString,i=typeof i===f?i.apply(e):i),r+=l(i)+" ",s={hash:{intlName:"share-modal.CHANGE_DOWNLOAD_PREF",url:"/account/prefs/downloads/"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+"</div>",r}function j(e,t){var r="",i,s;r+='\n						<div class="sliding-frame">\n\n							<div class="link-type-content grab-link">\n\n								',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(45,F,t),data:t});if(i||i===0)r+=i;r+='\n\n								<input readonly type="text" class="grab-link-text-field" value="',(i=n.grabLink)?i=i.call(e,{hash:{},data:t}):(i=e.grabLink,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n\n								<div class="grab-link-loader ',i=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse
:h.noop,fn:h.program(38,P,t),data:t});if(i||i===0)r+=i;r+='"><div class="balls"></div></div>\n\n								<div class="grab-link-reminders">\n									<div class="grab-link-privacy-reminder ',i=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:h.program(40,H,t),fn:h.program(48,q,t),data:t});if(i||i===0)r+=i;r+='">',(i=n.privacyWarningString)?i=i.call(e,{hash:{},data:t}):(i=e.privacyWarningString,i=typeof i===f?i.apply(e):i),r+=l(i)+"</div>\n									",i=n["if"].call(e,e.showDownloadWarning,{hash:{},inverse:h.noop,fn:h.program(42,B,t),data:t});if(i||i===0)r+=i;r+="\n								</div>\n\n							</div>\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:h.noop,fn:h.program(50,R,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.iframe),{hash:{},inverse:h.noop,fn:h.program(52,U,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:h.noop,fn:h.program(54,z,t),data:t});if(s||s===0)r+=s;return r+="\n						</div>\n\n					",r}function F(e,t){var r="",i;r+="\n									",i=n["if"].call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(46,I,t),data:t});if(i||i===0)r+=i;return r+="\n								",r}function I(e,t){var r="",i;return r+='\n									<div class="grab-link-permission-field grab-link-field">\n										<span class="grab-link-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									',r}function q(e,t){return" hide-reminder"}function R(e,t){var r="",i,s,o;return r+='\n								<div class="link-type-content html-embed">\n									<div class="embed-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultSizeStr,o):c.call(e,"renderTrustedMarkup",e.defaultSizeStr,o)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									<input readonly type="text" class="embed-code-text-field" value="',(s=n.defaultEmbedrCode)?s=s.call(e,{hash:{},data:t}):(s=e.defaultEmbedrCode,s=typeof s===f?s.apply(e):s),r+=l(s)+'">\n\n								</div>\n							',r}function U(e,t){var r="",i,s,o;return r+='\n								<div class="link-type-content html-iframe-embed">\n									<div class="iframe-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultIframeSizeStr,o):c.call(e,"renderTrustedMarkup",e.defaultIframeSizeStr,o)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									<input readonly type="text" class="iframe-code-text-field" value="',(s=n.defaultIframeCode)?s=s.call(e,{hash:{},data:t}):(s=e.defaultIframeCode,s=typeof s===f?s.apply(e):s),r+=l(s)+'">\n								</div>\n							',r}function z(e,t){var r="",i,s;return r+='\n								<div class="link-type-content html-bb-embed">\n									<input readonly type="text" class="bb-code-text-field" value="',(i=n.defaultBBCode)?i=i.call(e,{hash:{},data:t}):(i=e.defaultBBCode,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n									<div class="bb-code-size-field embed-size-field">\n										<span class="embed-code-label">\n											',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultBBCodeSizeStr,s):c.call(e,"renderTrustedMarkup",e.defaultBBCodeSizeStr,s)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n								</div>\n							',r}function W(e,t){var r="",i;return r+='\n				<div class="mail-perm-field">\n					<span class="mail-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n					<span class="dropdown-arrow"></span>\n				</div>\n				',r}function X(e,t){var r="",i;r+="\n					",i=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:h.noop,fn:h.program(59,V,t),data:t});if(i||i===0)r+=i;return r+="\n				",r}function V(e,t){var r="",i,s;return r+='\n						<div class="tertiary non-public-warning">',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.nonPublicWarning,s):c.call(e,"renderTrustedMarkup",e.nonPublicWarning,s)))+"</div>\n					",r}function $(e,t){return"make-room-for-dropdown"}function J(e,t){var r;return r=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:h.noop,fn:h.program(64,K,t),data:t}),r||r===0?r:""}function K(e,t){return"make-room-for-warning"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="share-panel-body">\n	<div class="share-panels">\n\n		<div class="main-sharing-panel share-panel">\n			<div class="network-buttons">\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(5,v,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.FACEBOOK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==
null||o===!1?o:o.tumblr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(7,m,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.TUMBLR"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(9,g,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.TWITTER"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(11,y,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.PINTEREST"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(13,b,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.MAIL"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n			</div>\n\n			<div class="link-instructions ',u=n["if"].call(t,t.moveInstructionsUp,{hash:{},inverse:h.noop,fn:h.program(15,w,i),data:i});if(u||u===0)s+=u;s+='">\n				',(u=n.copyMessage)?u=u.call(t,{hash:{},data:i}):(u=t.copyMessage,u=typeof u===f?u.apply(t):u),s+=l(u)+'\n			</div>\n\n			<div class="share-link-types first-stop">\n\n					<div class="link-type-buttons">\n\n						<span class="link-type-button link-grab-type-button ',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:h.noop,fn:h.program(17,E,i),data:i});if(u||u===0)s+=u;s+='">',a={hash:{intlName:"share-modal.GRAB_LINK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+"</span>\n\n						",u=n.unless.call(t,t.hideButtons,{hash:{},inverse:h.noop,fn:h.program(19,S,i),data:i});if(u||u===0)s+=u;s+='\n\n						<span class="link-type-highlight ',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:h.noop,fn:h.program(30,A,i),data:i});if(u||u===0)s+=u;s+='"></span>\n\n					</div>\n\n\n				<div class="link-type-contents">\n					',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:h.program(44,j,i),fn:h.program(32,O,i),data:i});if(u||u===0)s+=u;s+='\n\n				</div>\n			</div>\n		</div>\n\n\n		<div class="email-sharing-panel share-panel">\n\n			<div class="message-form">\n				<div class="fake-input">\n					<input type="text" class="email-recipient-text-field" placeholder="',a={hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'" data-field="recipient">\n				</div>\n\n				',u=n["if"].call(t,t.showMailPerms,{hash:{},inverse:h.program(58,X,i),fn:h.program(56,W,i),data:i});if(u||u===0)s+=u;s+='\n\n				<textarea class="email-message-text-field ',u=n["if"].call(t,t.showMailPerms,{hash:{},inverse:h.program(63,J,i),fn:h.program(61,$,i),data:i});if(u||u===0)s+=u;return s+='" placeholder="',a={hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'"></textarea>\n			</div>\n\n			<button disabled class="share-by-email mini">',a={hash:{intlName:"share-modal.FLICKR_SHARE"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</button>\n			<button class="leave-email-sharing mini alt">',a={hash:{intlName:"common.BACK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call
(t,a):c.call(t,"intlHTMLMessage",a)))+"</button>\n\n		</div>\n\n\n	</div>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-panel-restyle",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return" single-link"}function d(e,t){var r="",i,s;r+="\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:c.noop,fn:c.program(4,v,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.flickr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.noop,fn:c.program(6,m,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:c.noop,fn:c.program(8,g,t),data:t});if(s||s===0)r+=s;return r+="\n						",r}function v(e,t){var r="",i,s;return r+='\n								<span class="link-type-button embed-type-button">',s={hash:{intlName:"share-modal.EMBED_SIMPLE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function m(e,t){var r="",i,s;return r+='\n							<span class="link-type-button email-type-button">',s={hash:{intlName:"share-modal.EMAIL"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function g(e,t){var r="",i,s;return r+='\n								<span class="link-type-button bbcode-type-button">',s={hash:{intlName:"share-modal.BBCODE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function y(e,t){var r="",i,s;r+="\n							",s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.flickr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.noop,fn:c.program(6,m,t),data:t});if(s||s===0)r+=s;return r+="\n						",r}function b(e,t){return" single-highlight"}function w(e,t){var r="",i,s;r+='\n						<div class="link-type-content grab-link-only grab-link">\n							<div class="network-buttons">\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(19,x,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(21,T,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(23,N,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(25,C,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n'+'\n							</div>\n\n\n							<input readonly type="text" class="grab-link-text-field" value="',(s=n.grabLink)?s=s.call(e,{hash:{},data:t}):(s=e.grabLink,s=typeof s===h?s.apply(e):s),r+=l(s)+'">\n\n							',s=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:c.noop,fn:c.program(27,k,t),data:t});if(s||s===0)r+=s;r+='\n\n							<div class="grab-link-loader ',s=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:c.noop,fn:c.program(30,A,t),data:t});if(s||s===0)r+=s;r+=" ",s=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse:c.noop,fn:c.program(32,O,t),data:t});if(s||s===0)r+=s;r+='"><div class="balls"></div></div>\n\n							<div class="grab-link-reminders">\n								<div class="grab-link-privacy-reminder ',s=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:c.program(36,_,t),fn:c.program(34,M,t),data:t});if(s||s===0)r+=s;r+='">',(s=n.privacyWarningString)?s=s.call(e,{hash:{},data:t}):(s=e.privacyWarningString,s=typeof s===h?s.apply(e):s),r+=l(s)+"</div>\n								",s=n["if"].call(e,e.showDownloadWarning,{hash:{},inverse:c.noop,fn:c.program(38,D,t),data:t});if(s||s===0)r+=s;r+="\n							</div>\n\n						</div>\n\n						"
,s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.flickr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.noop,fn:c.program(40,P,t),data:t});if(s||s===0)r+=s;return r+="\n					",r}function E(e,t){return" sharing-type-disabled"}function S(e,t){return" sharing-type-enabled"}function x(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.facebook),r==null||r===!1?r:r.canNotShareTitle),typeof r===h?r.apply(e):r))+'"',n}function T(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.tumblr),r==null||r===!1?r:r.canNotShareTitle),typeof r===h?r.apply(e):r))+'"',n}function N(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.twitter),r==null||r===!1?r:r.canNotShareTitle),typeof r===h?r.apply(e):r))+'"',n}function C(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.pinterest),r==null||r===!1?r:r.canNotShareTitle),typeof r===h?r.apply(e):r))+'"',n}function k(e,t){var r="",i;r+="\n								",i=n["if"].call(e,e.choiceOfPermission,{hash:{},inverse:c.noop,fn:c.program(28,L,t),data:t});if(i||i===0)r+=i;return r+="\n							",r}function L(e,t){var r="",i;return r+='\n								<div class="grab-link-permission-field grab-link-field">\n									<span class="grab-link-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===h?i.apply(e):i),r+=l(i)+'</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n								',r}function A(e,t){return" no-permission-loader"}function O(e,t){return"no-permission-loader"}function M(e,t){return" hide-reminder"}function _(e,t){return" with-guestpasses "}function D(e,t){var r="",i,s;return r+='<div class="grab-link-download-reminder">',(i=n.downloadAccessString)?i=i.call(e,{hash:{},data:t}):(i=e.downloadAccessString,i=typeof i===h?i.apply(e):i),r+=l(i)+" ",s={hash:{intlName:"share-modal.CHANGE_DOWNLOAD_PREF",url:"/account/prefs/downloads/"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</div>",r}function P(e,t){var r="",i,s,o;r+='\n							<div class="link-type-content email-sharing-panel">\n								<div class="message-form">\n									<div class="fake-input">\n										<input type="text" class="email-recipient-text-field" placeholder="',o={hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'" data-field="recipient">\n									</div>\n\n									<textarea class="email-message-text-field ',s=n["if"].call(e,e.showMailPerms,{hash:{},inverse:c.program(43,B,t),fn:c.program(41,H,t),data:t});if(s||s===0)r+=s;r+='" placeholder="',o={hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'"></textarea>\n								</div>\n\n								<div class="button-bar">\n									',s=n["if"].call(e,e.showMailPerms,{hash:{},inverse:c.program(48,I,t),fn:c.program(46,F,t),data:t});if(s||s===0)r+=s;return r+='\n									<button disabled class="share-by-email">',o={hash:{intlName:"share-modal.FLICKR_SHARE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+"</button>\n								</div>\n							</div>\n						",r}function H(e,t){return"make-room-for-dropdown"}function B(e,t){var r;return r=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:c.noop,fn:c.program(44,j,t),data:t}),r||r===0?r:""}function j(e,t){return"make-room-for-warning"}function F(e,t){var r="",i;return r+='\n									<div class="mail-perm-field">\n										<span class="mail-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===h?i.apply(e):i),r+=l(i)+'</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									',r}function I(e,t){var r="",i;r+="\n										",i=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:c.noop,fn:c.program(49,q,t),data:t});if(i||i===0)r+=i;return r+="\n									",r}function q(e,t){var r="",i,s;return r+='\n											<div class="tertiary non-public-warning">',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.nonPublicWarning,s):f.call(e,"renderTrustedMarkup",e.nonPublicWarning,s)))+"</div>\n										",r}function R(e,t){var r="",i,s;r+='\n\n						<div class="link-type-content grab-link">\n\n							<div class="network-buttons">\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(19,x,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(21,T,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+
l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(23,N,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(25,C,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n'+'\n							</div>\n							<input readonly type="text" class="grab-link-text-field" value="',(s=n.grabLink)?s=s.call(e,{hash:{},data:t}):(s=e.grabLink,s=typeof s===h?s.apply(e):s),r+=l(s)+'">\n\n							',s=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:c.noop,fn:c.program(27,k,t),data:t});if(s||s===0)r+=s;r+='\n\n							<div class="grab-link-loader ',s=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse:c.noop,fn:c.program(32,O,t),data:t});if(s||s===0)r+=s;r+='"><div class="balls"></div></div>\n\n							<div class="grab-link-reminders">\n								<div class="grab-link-privacy-reminder ',s=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:c.program(36,_,t),fn:c.program(34,M,t),data:t});if(s||s===0)r+=s;r+='">',(s=n.privacyWarningString)?s=s.call(e,{hash:{},data:t}):(s=e.privacyWarningString,s=typeof s===h?s.apply(e):s),r+=l(s)+"</div>\n								",s=n["if"].call(e,e.showDownloadWarning,{hash:{},inverse:c.noop,fn:c.program(38,D,t),data:t});if(s||s===0)r+=s;r+="\n							</div>\n\n						</div>\n\n						",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:c.noop,fn:c.program(52,U,t),data:t});if(s||s===0)r+=s;r+="\n\n						",s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.flickr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.noop,fn:c.program(61,$,t),data:t});if(s||s===0)r+=s;r+="\n\n						",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:c.noop,fn:c.program(63,J,t),data:t});if(s||s===0)r+=s;return r+="\n\n					",r}function U(e,t){var r="",i,s,o;r+='\n							<div class="link-type-content html-embed">\n\n								<input readonly type="text" class="embed-code-text-field" value="',(i=n.defaultEmbedrCode)?i=i.call(e,{hash:{},data:t}):(i=e.defaultEmbedrCode,i=typeof i===h?i.apply(e):i),r+=l(i)+'">\n\n								<div class="embed-demo-container ',o={hash:{},inverse:c.noop,fn:c.program(53,z,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(55,W,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o));if(s||s===0)r+=s;r+='">\n									<div class="embed-demo">\n									</div>\n								</div>\n\n								<div class="embed-options">\n									<div class="radio">\n										<input type="checkbox" data-setting="header" id="embedr-option-header" name="radio" ',o={hash:{},inverse:c.noop,fn:c.program(57,X,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o));if(s||s===0)r+=s;r+='>\n										<label for="embedr-option-header">\n											<div class="square"></div>\n											<span>',o={hash:{intlName:"share-modal.EMBEDR_OPTION_HEADER"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'</span>\n										</label>\n									</div>\n\n									<div class="radio">\n										<input type="checkbox" data-setting="footer" id="embedr-option-footer" name="radio" ',o={hash:{},inverse:c.noop,fn:c.program(57,X,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o));if(s||s===0)r+=s;r+='>\n										<label for="embedr-option-footer">\n											<div class="square"></div>\n											<span>',o={hash:{intlName:"share-modal.EMBEDR_OPTION_FOOTER"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+"</span>\n										</label>\n									</div>\n\n									",s=n.unless.call(e,e.isAlbumEmbed,{hash:{},inverse:c.noop,fn:c.program(59,V,t),data:t});if(s||s===0)r+=s;return r+='\n\n									<div class="embed-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultSizeStr,o):f.call(e,"renderTrustedMarkup",e.defaultSizeStr,o)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n								</div> <!-- embed options-->\n\n							</div>\n						',r}function z(e,t){return"show-header"}function W(e,t){return"show-footer"}function X(e,t){return'checked="true"'}function V
(e,t){var r="",i,s,o;r+='\n									<div class="radio">\n										<input type="checkbox" data-setting="context" id="embedr-option-context" name="radio" ',o={hash:{},inverse:c.noop,fn:c.program(57,X,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.context),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.context),"===","true",o));if(s||s===0)r+=s;return r+='>\n										<label for="embedr-option-context">\n											<div class="square"></div>\n											<span>',o={hash:{intlName:"share-modal.EMBEDR_OPTION_SLIDESHOW"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+"</span>\n										</label>\n									</div>\n									",r}function $(e,t){var r="",i,s,o;r+='\n							<div class="link-type-content email-sharing-panel">\n								<div class="message-form">\n									<div class="fake-input">\n										<input type="text" class="email-recipient-text-field" placeholder="',o={hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'" data-field="recipient">\n									</div>\n\n									<textarea class="email-message-text-field ',s=n["if"].call(e,e.showMailPerms,{hash:{},inverse:c.program(43,B,t),fn:c.program(41,H,t),data:t});if(s||s===0)r+=s;r+='" placeholder="',o={hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'"></textarea>\n								</div>\n\n								<div class="button-bar">\n									',s=n["if"].call(e,e.showMailPerms,{hash:{},inverse:c.program(48,I,t),fn:c.program(46,F,t),data:t});if(s||s===0)r+=s;return r+='\n\n									<button disabled class="share-by-email">',o={hash:{intlName:"share-modal.FLICKR_SHARE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+"</button>\n								</div>\n							</div>\n						",r}function J(e,t){var r="",i,s;return r+='\n							<div class="link-type-content html-bb-embed">\n								<input readonly type="text" class="bb-code-text-field" value="',(i=n.defaultBBCode)?i=i.call(e,{hash:{},data:t}):(i=e.defaultBBCode,i=typeof i===h?i.apply(e):i),r+=l(i)+'">\n								<div class="bb-code-size-field embed-size-field">\n									<span class="embed-code-label">\n										',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultBBCodeSizeStr,s):f.call(e,"renderTrustedMarkup",e.defaultBBCodeSizeStr,s)))+'\n									</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n							</div>\n						',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+='<div class="share-panel-body">\n	<div class="share-panels">\n\n		<div class="main-sharing-panel share-panel">\n\n			<div class="share-link-types first-stop">\n\n					<div class="link-type-buttons">\n\n						<span class="link-type-button link-grab-type-button ',o=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+='">',a={hash:{intlName:"share-modal.SHARE"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):f.call(t,"intlHTMLMessage",a)))+"</span>\n\n						",u=n.unless.call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n\n						",u=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(10,y,i),data:i});if(u||u===0)s+=u;s+='\n\n						<span class="link-type-highlight ',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(12,b,i),data:i});if(u||u===0)s+=u;s+='"></span>\n\n					</div>\n\n\n				<div class="link-type-contents">\n					',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.program(51,R,i),fn:c.program(14,w,i),data:i});if(u||u===0)s+=u;return s+="\n\n				</div>\n			</div>\n\n\n		</div>\n\n	</div>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel-restyle",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-droparound",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" html"}function h(e,t){return" subview-droparound"}function p(e,t){return" menu"}function d(e,t){return" auto-size"}function v(e,t){var r="",i;return r+="max-height: ",(i=n.staticHeight)?i=i.call(e,{hash:{},data:t}):(i=e.staticHeight,i=typeof i===u?i.apply(e):i),r+=a(i)+"px; min-height: ",(i=n.staticHeight)?i=i.call(e,{hash:{},data:t}):(i=e.staticHeight,i=typeof i===u?i.apply(e):i),r+=a(i)+"px; ",r}function m(e,t){var r="",i;return r+="width: ",(i=n.staticWidth)?i=i.call(e,{hash:{},data:t}):(i=e.staticWidth,i=typeof i===u?i.apply(e):i),r+=a(i)+"px;",r}function g(e,t){return"position: fixed;"}function y(e,t){return"hide-head"}function b(e,t){var r="",i;r+='\n			<div class="content text-only',i=n["if"].call(e,e.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='">\n				',(i=n.textMessage)?i=i.call(e,{hash:{},data:t}):(i=e.textMessage,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n			</div>\n		",r}function w(e,t){var r="",i,s;r+='\n			<div class="content html-only',i=n["if"].call(e,e.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='">\n				',s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlMessage,s):l.call(e,"renderTrustedMarkup",e.htmlMessage,s)))+"\n			</div>\n		",r}function E(e,t){return'\n			<div class="content subview"></div>\n		'}function S(e,t){var r="",i;r+='\n			<div class="content menu">\n				<ul role="menu">\n					',i=n.each.call(e,e.menuItems,{hash:{},inverse:f.noop,fn:f.programWithDepth(24,x,t,e),data:t});if(i||i===0)r+=i;return r+="\n				</ul>\n			</div>\n		",r}function x(e,t,r){var i="",s;i+="\n					",s=n["if"].call(e,r.multiSelect,{hash:{},inverse:f.program(30,k,t),fn:f.program(25,T,t),data:t});if(s||s===0)i+=s;return i+="\n					",i}function T(e,t){var r="",i;r+='\n						<li role="menuitem" ',i=n["if"].call(e,e.selected,{hash:{},inverse:f.noop,fn:f.program(26,N,t),data:t});if(i||i===0)r+=i;r+='><span class="selection"></span>',(i=n.text)?i=i.call(e,{hash:{},data:t}):(i=e.text,i=typeof i===u?i.apply(e):i),r+=a(i)+" - ",(i=n.itemFlag)?i=i.call(e,{hash:{},data:t}):(i=e.itemFlag,i=typeof i===u?i.apply(e):i),r+=a(i),i=n["if"].call(e,e.itemFlag,{hash:{},inverse:f.noop,fn:f.program(28,C,t),data:t});if(i||i===0)r+=i;return r+="</li>\n					",r}function N(e,t){return'class="selected"'}function C(e,t){var r="",i;return r+='<div class="label-new">',(i=n.itemFlag)?i=i.call(e,{hash:{},data:t}):(i=e.itemFlag,i=typeof i===u?i.apply(e):i),r+=a(i)+"</div>",r}function k(e,t){var r="",i;r+='\n						<li role="menuitem">',i=n["if"].call(e,e.href,{hash:{},inverse:f.noop,fn:f.program(31,L,t),data:t});if(i||i===0)r+=i;(i=n.text)?i=i.call(e,{hash:{},data:t}):(i=e.text,i=typeof i===u?i.apply(e):i),r+=a(i),i=n["if"].call(e,e.itemFlag,{hash:{},inverse:f.noop,fn:f.program(28,C,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.href,{hash:{},inverse:f.noop,fn:f.program(34,O,t),data:t});if(i||i===0)r+=i;return r+="</li>\n					",r}function L(e,t){var r="",i;r+='<a href="',(i=n.href)?i=i.call(e,{hash:{},data:t}):(i=e.href,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',i=n["if"].call(e,e.className,{hash:{},inverse:f.noop,fn:f.program(32,A,t),data:t});if(i||i===0)r+=i;return r+=">",r}function A(e,t){var r="",i;return r+=' class="',(i=n.className)?i=i.call(e,{hash:{},data:t}):(i=e.className,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function O(e,t){return"</a>"}function M(e,t){return"hide-foot"}function _(e,t){return'\n		<div class="droparrow up"></div>\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;s+='<div class="droparound',o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:f.noop,fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.subview,{hash:{},inverse:f.noop,fn:f.program(3,h,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.menuItems,{hash:{},inverse:f.noop,fn:f.program(5,p,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,i),data:i});if(o||o===0)s+=o;s+=" ",(o=n.classList)?o=o.call(t,{hash:{},data:i}):(o=t.classList,o=typeof o===u?o.apply(t):o),s+=a(o)+'"\nstyle="',o=n["if"].call(t,t.staticHeight,{hash:{},inverse:f.noop,fn:f.program(9,v,i),data:i});if(o||o===0)s+=o;s+="\n",o=n["if"].call(t,t.staticWidth,{hash:{},inverse:f.noop,fn:f.program(11,m,i),data:i});if(o||o===0)s+=o;s+="\n",o=n["if"].call(t,t.positionFixed,{hash:{},inverse:f.noop,fn:f.program(13,g,i),data:i});if(o||o===0)s+=o;s+='">\n	<div class="head ',o=n.unless.call(t,t.headContent,{hash:{},inverse:f.noop,fn:f.program(15,y,i),data:i});if(o||o===0)s+=o;s+='">\n		',(o=n.headContent)?o=o.call(t,{hash:{},data:i}):(o=t.headContent,o=typeof o===u?o.apply(t):o),s+=a(o)+'\n	</div>\n	<div class="body">\n		',o=n["if"].call(t,t.textMessage,{hash:{},inverse:f.noop,fn:f.program(17,b,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:f.noop,fn:f.program(19,w,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.subview,{hash:{},inverse:f.noop,fn:f.program(21,E,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.menuItems,{hash:{},inverse:f.noop,fn:f.program(23,S,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="foot ',o=n.unless.call(t,t.footContent,{hash:{},inverse:f.noop,fn:f.program(36,M,i),data:i});if(o||o===0)s+=o;s+='">\n		',(o=n.footContent)?o=o.call(t,{hash:{},data:i}):(o=t.footContent,o=typeof o===u?o.apply(t):o),s+=a(o)+"\n	</div>\n	",o=n["if"].call(t,t.showDropArrow,{hash:{},inverse:f.noop,fn:f.program(38,_,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-droparound",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",
{requires:["template-base","handlebars-base"]});
YUI.add("fluid-droparound-view",function(e,t){"use strict";var n=require("lib/flog")(t),r,i;r={css:{destinationContainer:"body",subviewContent:".content.subview",menuContent:".content.menu",droparoundContainer:".droparound",droparoundContent:".body .content",droparrow:".droparrow"},options:{}},i={supportsTransform:!1,droparound:{height:0,width:0}},e.namespace("Views").FluidDroparound=e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",!0)},buildContainer:function(){return!this.get("textMessage")&&!this.get("htmlMessage")&&!this.get("subview")&&!this.get("menuItems")?(n.warn("requires a `textMessage`, `htmlMessage`, `subview`, or `menuItems`."),this):(this.get("menuItems")&&this.set("menuItems",this.get("menuItems").filter(function(e){return!e.hidden})),this.setContainerHTML(this.templates("fluid-droparound")({textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),menuItems:this.get("menuItems"),multiSelect:this.get("multiSelect"),showDropArrow:this.get("showDropArrow"),hideModalOverlay:this.get("hideModalOverlay"),classList:this.get("classList"),footContent:this.get("footContent"),headContent:this.get("headContent"),staticWidth:this.get("width"),staticHeight:this.get("height"),positionFixed:this.get("positionFixed"),autoSizeToContent:this.get("autoSizeToContent")})),this.appendAndPosition(),this)},activate:function(){var t=this.get("container"),n=this;return e.OverlayManager.DroparoundOverlay.add(this),this.registerEventHandler(e.on("droparound:reposition",e.bind(this.anchorPositionChange,this))),this.registerEventHandler(e.on("history:change",function(e){if(e.src==="popstate"&&e.prevVal&&e.newVal)if(e.prevVal.flickr&&e.prevVal.flickr.referrer||e.newVal.flickr&&e.newVal.flickr.referrer)return;n.close(e)})),this.get("subview")&&this.loadSubview(),this.get("menuItems")&&this.registerEventHandler(t.one(r.css.menuContent).delegate("click",this.onMenuItemClick.bind(this),"li")),this.get("observePageResize")&&this.observePageResize(),this.get("closeOnScroll")&&this.observePageScroll(),this.fire("activated"),this},getDroparoundContainer:function(){return this.get("container")?this.get("container").one(r.css.droparoundContainer):null},loadSubview:function(){var t,n,i=!1,s=this.get("subview"),o=this;t=this.get("container").one(r.css.subviewContent),t.appendChild(e.Node.create(this.templates("flickr-balls")({})).addClass("flickr-balls")),n=setTimeout(function(){i=!0},40),this.loading=!0,s.appContext=o.appContext,s.set("isActiveViewAgnostic",!0),s.initialize().then(function(e){clearTimeout(n),i&&(e.get("container").addClass("load-transition"),setTimeout(function(){e.get("container").removeClass("load-transition")},1)),o.onSubviewInitialized(e)})},onSubviewInitialized:function(t){var n=this,i=this.get("container").one(r.css.subviewContent);if(!this.loading)return;this.loading=!1,i.one(".flickr-balls").remove(!0),i.appendChild(t.get("container")),t.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&n.fire.apply(n,e.details)}),t.normalizedActivate(),t.recursivelyActivateSubviews(),n.appendAndPosition(),n.registerEventHandler(n.get("subview").on("actionClick",e.bind(n.handleAction,n)))},onMenuItemClick:function(e){var t,n,i;t=e.target.ancestor("li",!0),t&&(n=this.get("container").one(r.css.menuContent).all("li").indexOf(t),n!==-1&&(i=this.get("menuItems")[n],this.get("multiSelect")&&(i.selected=!i.selected,t.toggleClass("selected")),this.fire("selected",{menuItemIndex:n,menuItem:i})))},appendAndPosition:function(){var t=e.one(r.css.destinationContainer),n=this.get("container").one(r.css.droparoundContainer);t&&(t.append(this.get("container")),i.droparound.width=this.get("width")||n.getComputedStyle("width"),i.droparound.height=this.get("height")||n.getComputedStyle("height"),this.repositionToElement(this.get("anchorElement")))},updateTextMessage:function(e){e&&e!==""&&(this.set("textMessage",e),this.buildContainer())},updateHTMLMessage:function(e){e&&e!==""&&(this.set("htmlMessage",e),this.buildContainer())},anchorPositionChange:function(){this.repositionToElement(this.get("anchorElement"))},observePageResize:function(){var t=this;this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(n){e.fire("droparound:reposition"),t.get("closeOnResize")&&t.handleClose(n)}))},observePageScroll:function(){var t=YUI.Env.isServer?0:e.config.win.pageYOffset,n=this;this.get("startingScrollPoint")||this.set("startingScrollPoint",t),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",n.handleScroll.bind(n)))},handleScroll:function(t){var n,r=this.get("startingScrollPoint");r?(n=e.config.win.pageYOffset,r+this.get("closeOnScrollDistance")<n&&this.handleClose(t)):this.set("startingScrollPoint",e.config.win.pageYOffset)},repositionToElement:function(t){var n=this.get("container"),s=e.one("body"),o=n.one(".droparound"),u=o.one(r.css.droparrow),a=t.getXY(),f=this.get("mirrorArrowAdjustment"),l=s.get("offsetWidth"),c=this.get("showDropArrow"),h=this.get("anchorOffsetVertical"),p=this.get("anchorOffsetHorizontal"),d=this.get("anchorPositionOffset"),v=this.get("minVerticalSpace"),m=o.get("offsetHeight"),g=o.get("offsetWidth"),y=parseInt(t.getComputedStyle("width"),10)||t.get("offsetWidth"),b=parseInt(t.getComputedStyle("height"),10)||t.get("offsetHeight"),w=this.get("dropdownArrowWidth"),E=this.get("dropdownArrowHeight"),S=i.droparound.width?parseInt(i.droparound.width,10):parseInt(o.getComputedStyle("width"),10),x=i.droparound.height?parseInt(i.droparound.height,10):parseInt(o.getComputedStyle("height"),10),T=o.one(r.css.droparoundContent),N=this.get("minHorizontalSpace")+Math.max(m,x),C=l-Math.max(g,S)-d-N,k=t.getDOMNode().getBoundingClientRect(),L,A,O,M,_,D,P,H,B,j,F=this.get("preferLeft"),I=this.get("preferRight"),q=this.get("preferTop"),R=this.get("preferBottom"),U=0,z=this.appContext.viewportData.getHeight(),W={};y||(y=0),b||(b=0),L=Math.ceil
((y-w)/2),M=S||g,_=x||m,A=a[1]-x-h,this.get("horizCenterToAnchor")?(O=a[0]+y/2-M/2,U=M/2-w/2):(O=a[0]-p,U=L+f+p),this.get("preferredSide")?this.get("preferredSide")==="left-middle"?(A=a[1]+Math.round(y/2)-h,O=a[0]+y+L+f+p+E,W.left=L+f-Math.round(E/2)+"px",W.top=(_-E)/2+"px",u.removeClass("down").addClass("left")):this.get("preferredSide")==="bottom-middle"&&(A=a[1]+Math.round(y/2)-h,O=a[0]+y+L+f+p+E,W.left=(M-w)/2-L+f-Math.round(w/2)+"px",W.top=_+"px",u.removeClass("down").addClass("up")):(P=A<v||k.top-x-h<v,H=O>C,B=k.top+k.height+x+h>z,j=O<0||O<a[0],!q&&P||q&&!P||R&&!B?(A=a[1]+b+h,c&&(W.left=U+"px",u.removeClass("up").addClass("down"))):c&&(W.left=U+"px",u.removeClass("down").addClass("up")),this.get("forceLeft")||!F&&H||F&&!H?a[0]+y+p>l?(O=a[0]-S,c&&(delete W.left,W.right=L+y+"px",u.addClass("right"))):(O=a[0]-S+y+p,c&&(delete W.left,W.right=L+p+"px",u.addClass("right"))):this.get("forceRight")||!I&&j||I&&!j?(O=a[0]-y+L,c&&(delete W.right,delete W.left,u.removeClass("right"))):c&&(delete W.right,W.left=U+"px",u.removeClass("right"))),c&&u.setStyles(W),o.setXY([O,A]),!this.get("menuItems")&&!this.get("autoSizeToContent")&&(D={width:M+"px",height:_+"px"},T.setStyles(D))},handleClose:function(e){this.close()},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},show:function(){var e=!this.isActivated,t=this;return this.initialize().then(function(){t.isClosed=!1,e||t.activate()}),this},close:function(){var t=this.get("container");this.loading=!1,this.isClosed=!0,this.fire("closeDroparound"),this.destroy(),this.get("subview")&&this.get("subview").destroy(),t&&t.remove(!0),e.OverlayManager.DroparoundOverlay.remove(this)},destructor:function(){this.detachAll()}},{ATTRS:{dismissOnOverlayClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnActionClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},hideModalOverlay:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},invisibleOverlay:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferredSide:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},footContent:{value:null},headContent:{value:null},width:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},height:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},subview:{value:null},menuItems:{value:null},classList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},anchorElement:{value:null},showDropArrow:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},anchorOffsetVertical:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},anchorOffsetHorizontal:{value:5,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},contentPadding:{value:12,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minVerticalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minHorizontalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowWidth:{value:21,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowHeight:{value:11},anchorPositionOffset:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},observePageResize:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferLeft:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferRight:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferTop:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferBottom:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},mirrorArrowAdjustment:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},positionFixed:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScroll:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScrollDistance:{value:40,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},closeOnResize:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers
.coerceBoolean(t)}},overlayClassList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},forceLeft:{value:null},forceRight:{value:null},autoSizeToContent:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},horizCenterToAnchor:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},multiSelect:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","fluid-css","hermes-template-fluid-droparound","fluid-balls-css","hermes-template-flickr-balls","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"]});
YUI.add("hermes-template-fluid-share-embedr-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;o={hash:{},inverse:f.noop,fn:f.program(2,d,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o):l.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o));if(s||s===0)r+=s;o={hash:{},inverse:f.noop,fn:f.program(4,v,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o):l.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o));if(s||s===0)r+=s;s=n.unless.call(e,e.isAlbumEmbed,{hash:{},inverse:f.noop,fn:f.program(6,m,t),data:t});if(s||s===0)r+=s;return r}function d(e,t){return'data-header="true" '}function v(e,t){return'data-footer="true" '}function m(e,t){var r,i,s;return s={hash:{},inverse:f.noop,fn:f.program(7,g,t),data:t},i=(r=n.ifCond||e.ifCond,r?r.call(e,(r=e.displayOptions,r==null||r===!1?r:r.context),"===","true",s):l.call(e,"ifCond",(r=e.displayOptions,r==null||r===!1?r:r.context),"===","true",s)),i||i===0?i:""}function g(e,t){return'data-context="true" '}function y(e,t){return'data-vr="true" '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=this,l=n.helperMissing,c="function",h=this.escapeExpression;s+='<a data-flickr-embed="true" ',a={hash:{},inverse:f.noop,fn:f.program(1,p,i),data:i},u=(o=n.isFlipped||t.isFlipped,o?o.call(t,t.flippers,"enable-share-restyle",a):l.call(t,"isFlipped",t.flippers,"enable-share-restyle",a));if(u||u===0)s+=u;a={hash:{},inverse:f.noop,fn:f.program(9,y,i),data:i},u=(o=n.ifCond||t.ifCond,o?o.call(t,(o=t.displayOptions,o==null||o===!1?o:o.vr),"===","true",a):l.call(t,"ifCond",(o=t.displayOptions,o==null||o===!1?o:o.vr),"===","true",a));if(u||u===0)s+=u;return s+=' href="',(u=n.embedLink)?u=u.call(t,{hash:{},data:i}):(u=t.embedLink,u=typeof u===c?u.apply(t):u),s+=h(u)+'" title="',(u=n.title)?u=u.call(t,{hash:{},data:i}):(u=t.title,u=typeof u===c?u.apply(t):u),s+=h(u)+'"><img src="',(u=n.farmURL)?u=u.call(t,{hash:{},data:i}):(u=t.farmURL,u=typeof u===c?u.apply(t):u),s+=h(u)+'" width="',(u=n.width)?u=u.call(t,{hash:{},data:i}):(u=t.width,u=typeof u===c?u.apply(t):u),s+=h(u)+'" height="',(u=n.height)?u=u.call(t,{hash:{},data:i}):(u=t.height,u=typeof u===c?u.apply(t):u),s+=h(u)+'" alt="',(u=n.alt)?u=u.call(t,{hash:{},data:i}):(u=t.alt,u=typeof u===c?u.apply(t):u),s+=h(u)+'"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-embedr-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-bb-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i;r+="by [url=",i=n["if"].call(e,e.authorURL,{hash:{},inverse:l.program(4,d,t),fn:l.program(2,p,t),data:t});if(i||i===0)r+=i;return r+="]",(i=n.authorName)?i=i.call(e,{hash:{},data:t}):(i=e.authorName,i=typeof i===a?i.apply(e):i),r+=f(i)+"[/url]",r}function p(e,t){var r;return(r=n.authorURL)?r=r.call(e,{hash:{},data:t}):(r=e.authorURL,r=typeof r===a?r.apply(e):r),f(r)}function d(e,t){return"shortURL"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;s+="[url=",(o=n.shortURL)?o=o.call(t,{hash:{},data:i}):(o=t.shortURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"][img]",(o=n.farmURL)?o=o.call(t,{hash:{},data:i}):(o=t.farmURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"[/img][/url][url=",(o=n.shortURL)?o=o.call(t,{hash:{},data:i}):(o=t.shortURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"]",(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===a?o.apply(t):o),s+=f(o)+"[/url] ",o=n["if"].call(t,t.authorName,{hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i});if(o||o===0)s+=o;return s+=", ",u={hash:{intlName:"share-modal.ON_FLICKR"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):c.call(t,"intlMessage",u))),s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-bb-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-share-modal-mail-pill",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="pill" title="',u={hash:{},data:i},s+=f((o=n.stripTags||t.stripTags,o?o.call(t,t.value,u):a.call(t,"stripTags",t.value,u)))+'">\n	<span>',u={hash:{},data:i},s+=f((o=n.stripTags||t.stripTags,o?o.call(t,t.value,u):a.call(t,"stripTags",t.value,u)))+'</span>\n	<span class="remove-tag">\n		<i class="delete-tag" title="Delete"></i>\n	</span>\n</div>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/share-modal-mail-pill",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-warning",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r;return(r=n.title)?r=r.call(e,{hash:{},data:t}):(r=e.title,r=typeof r===a?r.apply(e):r),f(r)}function p(e,t){var r,i;return i={hash:{intlName:"common.OOPS"},data:t},f((r=n.intlMessage||e.intlMessage,r?r.call(e,i):l.call(e,"intlMessage",i)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='<div class="fluid-warning">\n	<span class="warning-title">',o=n["if"].call(t,t.title,{hash:{},inverse:c.program(3,p,i),fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;return s+='</span>\n	<br/><br/>\n	<span class="warning-message">',(o=n.message)?o=o.call(t,{hash:{},data:i}):(o=t.message,o=typeof o===a?o.apply(t):o),s+=f(o)+'</span>\n	<button class="button">',u={hash:{intlName:"common.OK"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+"</button>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-warning",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-panel-error",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<div class="share-panel-body cancel-share">\n	<div class="cancel-message">\n		',(o=n.errorMessage)?o=o.call(t,{hash:{},data:i}):(o=t.errorMessage,o=typeof o===a?o.apply(t):o),s+=f(o)+'\n	</div>\n\n	<button class="done-sharing mini">',u={hash:{intlName:"common.CANCEL"},data:i},s+=f((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,u):l.call(t,"intlHTMLMessage",u)))+"</button>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel-error",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-old-html-embed-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;return s+='<a href="',(o=n.embedLink)?o=o.call(t,{hash:{},data:i}):(o=t.embedLink,o=typeof o===f?o.apply(t):o),s+=l(o)+'" title="',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===f?o.apply(t):o),s+=l(o)+" by ",(o=n.authorName)?o=o.call(t,{hash:{},data:i}):(o=t.authorName,o=typeof o===f?o.apply(t):o),s+=l(o)+", ",a={hash:{intlName:"share-modal.ON_FLICKR"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):c.call(t,"intlMessage",a)))+'"><img src="',(u=n.farmURL)?u=u.call(t,{hash:{},data:i}):(u=t.farmURL,u=typeof u===f?u.apply(t):u),s+=l(u)+'" width="',(u=n.width)?u=u.call(t,{hash:{},data:i}):(u=t.width,u=typeof u===f?u.apply(t):u),s+=l(u)+'" height="',(u=n.height)?u=u.call(t,{hash:{},data:i}):(u=t.height,u=typeof u===f?u.apply(t):u),s+=l(u)+'" alt="',(u=n.alt)?u=u.call(t,{hash:{},data:i}):(u=t.alt,u=typeof u===f?u.apply(t):u),s+=l(u)+'"></a>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-old-html-embed-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-old-iframe-embed-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<iframe src="',(o=n.embedLink)?o=o.call(t,{hash:{},data:i}):(o=t.embedLink,o=typeof o===u?o.apply(t):o),s+=a(o)+'" width="',(o=n.width)?o=o.call(t,{hash:{},data:i}):(o=t.width,o=typeof o===u?o.apply(t):o),s+=a(o)+'" height="',(o=n.height)?o=o.call(t,{hash:{},data:i}):(o=t.height,o=typeof o===u?o.apply(t):o),s+=a(o)+'" frameborder="0" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-old-iframe-embed-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("flickr-contacts-getListfetcher",function(e,t){"use strict";function n(t,n){var r=t[0],i=t[1];return r.contacts&&r.contacts.contact&&r.contacts.contact.forEach(function(t){i.addOrUpdate(e.APIHelper.response.parsePerson(t))}),r}function r(n,r){var i=this;return n.extras=(n.extras||"")+", icon_urls, paid_products",e.Promise.all([r.callAPI("flickr.contacts.getList",n),r.getModelRegistry("person-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-contacts-getList"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["person-models"]});
YUI.add("contact-search-box",function(e){var t,n=function(n){this.options=n,this.options.elValue=this.options.elValue||"value",this.options.hideInitially||[],this._contacts=null,this.queryEl=this.options.el,this.queryElEvent,this.listEl=null,t=this.options.DOMContainer||e.config.win,this.init()};n.prototype={langBundles:["common","photo-page-scrappy"],init:function(){var t=this;this.options.showFollowingState!==!1&&(this.options.showFollowingState=!0),this.queryEl.on("keydown",this.keynav.bind(this)),this.queryElEvent=this.queryEl.on("keyup",this.search.bind(this)),this.wrapperEl=e.Node.create("<div/>"),this.wrapperEl.addClass("c-contact-search-autocomplete"),this.listEl=e.Node.create("<ul/>"),this.listEl.addClass("contact-list"),this.wrapperEl.appendChild(this.listEl),this.listEl.on("mouseover",function(e){var n=e.target.ancestor("li",!0);if(!n||n===t.highlighted)return;t._highlight(n)}),this.queryEl.ancestor().insertBefore(this.wrapperEl,this.queryEl),this.wrapperEl.appendChild(this.queryEl),this.options.clickContact=this.options.clickContact||function(e){var n=e.target.ancestor("[data-nsid]",!0),r=n?n.getData("nsid"):"";t.select(r)},this.listEl.delegate("click",this.options.clickContact,"li"),this.selectedIndex=0},keynav:function(e){e.keyCode===38?(e.preventDefault(),this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=this.numShowing+this.selectedIndex),this._highlight(this.selectedIndex),this._scrollToNode(this.highlighted)):e.keyCode===40?(e.preventDefault(),this.selectedIndex++,this.selectedIndex>this.numShowing-1&&(this.selectedIndex=this.numShowing-this.selectedIndex),this._highlight(this.selectedIndex),this._scrollToNode(this.highlighted)):e.keyCode===9?this._visible&&this.highlighted&&(e.preventDefault(),this.select(this.highlighted.getData("nsid"))):e.keyCode===13&&this._visible&&this.highlighted&&(e.preventDefault(),!e.target.ancestor(".share-view",!0)&&!e.target.ancestor(".fluid-share-panel-view",!0)?this.options.clickContact(e,this.highlighted):this.select(this.highlighted.getData("nsid")))},_highlight:function(t){var n=this.listEl.all("li"),r=t instanceof e.Node,i=r?t:n.item(t),s=r?n.indexOf(t):t;i&&!i.hasClass("loading")&&!i.hasClass("no-members")&&(n.removeClass("highlight"),i.addClass("highlight"),this.selectedIndex=s,this.highlighted=i)},_scrollToNode:function(e){var t=this.listEl.get("scrollTop"),n=t+this.listEl.get("clientHeight"),r=e.get("offsetTop"),i=r+e.get("clientHeight"),s=5;t>r?this.listEl.set("scrollTop",r-s):n<i&&this.listEl.set("scrollTop",i-this.listEl.get("clientHeight")+s)},getContact:function(e){var t=0,n=this._contacts,r=n.length;for(;t<r;t++)if(n[t].nsid===e&&!n[t].hide)return n[t]},hideFromSearch:function(e){e=e.trim(),this._contacts&&this._contacts.some(function(t){if(t.nsid.trim()===e)return t.hide=!0,!0})},resetSearch:function(){this._contacts&&this._contacts.forEach(function(e){e.hide=!1})},showInSearch:function(e){e=e.trim(),this._contacts&&this._contacts.some(function(t){if(t.nsid.trim()===e)return t.hide=!1,!0})},load:function(e){var t={},n=this,r,i;if(this._busy)return;return this._end=!1,this._busy=!0,t.can_tag=this.options.canTag||0,i=this.options.appContext.getViewer().nsid,r=this.options.appContext.getModel("contacts-models",i),r.then(function(r){return t.page=1,t.perPage=3e3,t.per_page=3e3,n._loadMoreContacts(r,t,e)},function(){n._busy=!1,n.options.onError()})},_loadMoreContacts:function(e,t,n){var r=this;return this._busy=!0,r.options.loadingState&&!r.listEl.one("li.loading")&&r.appendLoader(),e.getValue("contacts").getPage(t).then(function(i){r._contacts=(r.processContactModels(i,!0,!0)||[]).concat(r._contacts||[]),n(),(!r._contacts||r._contacts.length===0)&&r.hide(),t.page<e.getValue("pages")&&(t.page++,r._loadMoreContacts(e,t,n))},function(){r._busy=!1,r.options.onError()})},processContactModels:function(t,n,r){var i=this,s,o,u;try{u=t.map(function(e){return e.toJSON()})||[]}catch(a){u=[]}if(!i.contactIds){i.contactIds={};if(i._contacts)for(o in i._contacts)i.contactIds[o.id]=!0}return u=u.filter(function(e){return!i.contactIds[e.id]}),u.forEach(function(t,n){i.contactIds[t.id]=!0,t.realname=t.realname||t.username,t.isContact=r,t.buddyicon=e.URLHelper.getBuddyIconURL(t.nsid,t.iconfarm,t.iconserver)}),n&&i.options.me&&(s=i.options.me.toJSON(),e.APIHelper.response.agnosticizeFarmPathTransferProtocol(s.buddyicon),s.buddyicon=s.buddyicon["default"],i.contactIds[s.id]=!0,s.me=!0,u.push(s)),i.options.hideInitially&&u.forEach(function(e){i.options.hideInitially.indexOf(e.nsid)>-1&&(e.hide=!0)}),u},destructor:function(){this.queryElEvent&&this.queryElEvent.detach&&this.queryElEvent.detach()},hide:function(e){e&&e.halt();if(!this._visible)return;this._visible=!1,this.highlighted=null,this.selectedIndex=0,this.selected=null,this.options.noShim||this._shimUp(!1),this.listEl.setStyle("display","none"),this.options.onHide&&this.options.onHide()},show:function(){if(this._visible)return;this._visible=!0,this.options.noShim||this._shimUp(),this.listEl.setStyle("display","block"),this._reposition(),this.options.onShow()},_reposition:function(){var n={width:t.innerWidth||t.clientWidth,height:t.innerHeight||t.clientHeight},r=this.options.el,i=r.getDOMNode(),s=i.getBoundingClientRect(),o=this.listEl.getDOMNode().getBoundingClientRect(),u=!this._contacts,a=u&&this.options.upInitially,f=t===e.config.win?s.top:i.clientTop,l;this.options.dialogOffset&&(l=this.options.dialogOffset()),a||f>0&&f+o.height+25>n.height&&!this.options.alwaysDownward?(this.listEl.setStyle("top","auto"),this.listEl.setStyle("bottom","25px"),this.options.onOrientationChange&&this.options.onOrientationChange(!0)):(this.listEl.setStyle("top",l||null),this.listEl.setStyle("bottom",null),this.options.onOrientationChange&&this.options.onOrientationChange(!1),r.ancestor(".modal",!0)&&this.listEl.setStyle("maxHeight",n.height-f-25))},_shimUp:function(t){if(t===!1){if(!this._shim)return;this._shim.detach("click").remove(),this._shim=null;return}this._shim=e.Node.create("<div/>"),this
._shim.addClass(this.options.shim),this._shim.on("click",this.hide.bind(this)),this.wrapperEl.appendChild(this._shim)},select:function(e){typeof e=="string"&&(e=this.getContact(e),e&&this.queryEl.set("value",e.realname)),e&&(this.selected=e,this.options.onSelect(e)),this.hide()},search:function(e){var t=this.queryEl.get(this.options.elValue),n=this,r,i,s,o=this.options.appContext.getViewer().nsid;if(e&&e.keyCode===27){e.preventDefault(),this.queryEl.blur();return}if(e&&[38,40,9].indexOf(e.keyCode)!==-1){e.preventDefault();return}this._nameTest(t),this.selected=null,this.selectedIndex=0,this.abort=!1;if(t.trim()==="")return this.abort=!0,this.hide();this.options.searchNonContacts||(this._end=!0,this._busy=!1);if(this._contacts&&this.options.me&&t==="me")return this.showResults(this._contacts.filter(function(e){return!e.hide&&e.me}).concat(this._contacts.filter(function(e){return!e.hide&&n._matchesQuery(e)})));if(this._isEmail(t))return this.select({email:t,nsid:null});if(/,/.test(t))return this.select(null);if(!this._contacts){if(this.options.signedOut)return;this.showResults(),this.load(this.search.bind(this))}this._contacts&&(r=this._contacts.filter(function(e){return!e.hide&&n._matchesQuery(e)})),this.showResults(r),i=n.listEl.getDOMNode(),this.options.searchNonContacts&&(this.options.loadMoreOnScroll&&t.length>0?(s=1,clearTimeout(this.searchAllPeople),this.searchInstanceId=Math.random()*999999,this.searchAllPeople=setTimeout(function(){n._searchPeople(t,o,s,n.searchInstanceId,function(){n._busy=!1,n.showResults(n._contacts.filter(function(e){return!e.hide&&n._matchesQuery(e)})),n.listElScrollEvent=n.listEl.on("scroll",function(){n.listEl._node.clientHeight+n.listEl._node.scrollTop===n.listEl._node.scrollHeight&&(s++,n._loadMore(s,o,t))})})},500)):(clearTimeout(this.searchAllPeople),this.searchInstanceId=Math.random()*999999))},_loadMore:function(e,t,n){var r=this;this._busy=!0,clearTimeout(this.searchAllPeople),this.searchInstanceId=Math.random()*999999,this.searchAllPeople=setTimeout(function(){r.options.loadingState&&!r.listEl.one("li.loading")&&r.appendLoader(),r._searchPeople(n,t,e,r.searchInstanceId,function(){r.showResults(r._contacts.filter(function(e){return!e.hide&&r._matchesQuery(e)})),r.listElScrollEvent&&r.listElScrollEvent.detach(),r.listElScrollEvent=r.listEl.on("scroll",function(){r.listEl._node.clientHeight+r.listEl._node.scrollTop===r.listEl._node.scrollHeight&&(e++,r._loadMore(e,t,n))})})},100)},_nameTest:function(t){var n=new RegExp(".*"+e.flutil.agnosticizeUnicode(t).replace(/\s/,"\\s")+".*","ig");this._matchesQuery=function(e){return n.test(e.username)||n.test(e.realname)||n.test(e.email)}},appendLoader:function(e){e=e||this.listEl;var t=document.createElement("li"),n=e.scrollTop;t.className="loading",t.innerHTML=this.options.loadingState,e.appendChild(t),e.scrollTop=n+t.clientHeight},_searchPeople:function(e,t,n,r,i){var s=this,o,u;s._end=!1,s.options.loadingState&&!s.listEl.one("li.loading")&&s.appendLoader(),o=s.options.appContext.getModel("contacts-models",t),o.then(function(t){return u=t.search({username:e,page:n}),u.then(function(e){var t=e.people,n=s.processContactModels(t,!1,!1);s._contacts=s._contacts||[],s._contacts=s._contacts.concat(n),s._contacts.some(function(e){return s._matchesQuery(e)})||(s._end=!0),i()},function(){s._end=!0,s._busy=!1,i()})},function(){s._end=!0,s._busy=!1,i()})},_isEmail:function(e,t){/,/.test(e)?e=e.split(/,/):e=[e];var n=/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;if(t){while(e.length)if(n.test(e.shift().trim()))return!0;return!1}while(e.length)if(!n.test(e.shift().trim()))return!1;return!0},showResults:function(t){if(this.abort)return;var n=this.options.max||10,r,i,s=this;r=document.createDocumentFragment(),t&&this.selectedIndex>=t.length&&(this.selectedIndex=t.length-1),this.numShowing=Math.min(n,t&&t.length||0),!s._busy&&t&&t.length===0?(i=document.createElement("li"),i.innerHTML='<span class="no-contacts">'+this.intlMessage({intlName:"photo-page-scrappy.NO_MEMBERS_FOUND"})+"</span>",i.className="no-members",r.appendChild(i),s.highlighted=null):t&&t.slice(0,n).forEach(function(t,n,i){var o=s.createItem(t);n===s.selectedIndex&&(o.setAttribute("class","highlight"),s.highlighted=e.Node(o)),r.appendChild(o)}),(s._busy||!t)&&s.options.loadingState&&s.appendLoader(r),this.options.loadMoreOnScroll&&this.listElScrollEvent&&this.listElScrollEvent.detach(),this.listEl.setHTML(""),this.listEl.getDOMNode().appendChild(r),this.show()},_template:function(){return['<img src="{{buddyicon}}">','<div class="following-status {{isContact}}">','<span class="following-icon">&nbsp;</span>',"<span>"+this.intlMessage({intlName:"common.FOLLOWING"})+"</span>","</div>",'<h2 class="all">{{realname}}</h2>','<h3 class="all">{{username}}</h3>'].join("")},_onlyContactTemplate:['<img src="{{buddyicon}}">',"<h2>{{realname}}</h2>","<h3>{{username}}</h3>"].join(""),createItem:function(t){var n=document.createElement("li"),r,i=this.options.searchNonContacts&&this.options.showFollowingState?this._template():this._onlyContactTemplate,s=this.options.truncateLength||70;return r=i.replace(/\{\{(\w+)\}\}/g,function(n,r){if(r==="buddyicon")return t[r];if(r==="isContact")return t[r]?"am-following":"";var i=e.flutil.escapeInput(t[r]);return e.Handlebars.helpers.truncate(i,s)}),n.innerHTML=r,n.dataset?(n.dataset=n.dataset,n.dataset.nsid=t.nsid,n.dataset.displayname=t.realname||t.username,n.dataset.pathAlias=t.pathAlias,n.dataset.ispro=t.isPro):(n.setAttribute("data-nsid",t.nsid),n.setAttribute("data-displayname",t.realname||t.username),n.setAttribute("data-path-alias",t.pathAlias),n.setAttribute("data-ispro",t.isPro)),n}},e.mix(n.prototype,e.Localizable),e.ContactSearchBox=n},"@VERSION@",{requires:["api-helper","flutil","contact-search-css","handlebars-helpers","flickr-contacts-getListfetcher"],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-template-html5-balls",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'\n<div class="html5-balls">\n	<div class="blueball"></div>\n	<div class="pinkball"></div>\n</div>\n'}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/html5-balls",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-html4-balls",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'\n<div class="html4-balls"></div>\n'}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/html4-balls",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("html5-balls",function(e){var t=!(e.UA.ie&&e.UA.ie<9),n;n=function(e){return t?"html5-balls":"html4-balls"},e.augment(n,e.Attribute),e.Balls=n},"@VERSION@",{requires:["base","html5-balls-css","hermes-template-html5-balls","hermes-template-html4-balls","handlebars-helpers","template-base"]});
